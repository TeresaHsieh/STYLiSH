<!DOCTYPE html>
<html>

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-144865201-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-144865201-1');
    </script>

    <meta charset="utf-8">
    <title>Stylish, Clothing and Lifestyle</title>
    <meta name="description=" content="Discover the latest women's fashion trends at Stylish. Shop women's clothing and accessories and get inspired by the latest fashion trends.">
    <link rel="stylesheet" href="./index.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>


    <!-- FB Login Starts -->
    <script>
        // 初始化 // 指派給 window.fbAsyncInit 的函數會在 SDK 完成載入後馬上執行
        window.fbAsyncInit = function () {
            FB.init({
                appId: '1385555128262108',
                cookie: true,
                xfbml: true,
                /* xfbml 設為 true 時，SDK 會剖析頁面的 DOM，以尋找並初始化任何新增且使用 XFBML 的社交外掛程式
                如果頁面沒有使用社交外掛程式，將 xfbml 設為 false 就會改善頁面載入時間 */
                version: 'v3.3'
            });

            //記錄用戶行為資料 可在後台查看用戶資訊
            FB.AppEvents.logPageView();

            // FB.getLoginStatus(function (response) {
            //     statusChangeCallback(response);
            // });


        };

        //嵌入臉書sdk
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement(s); js.id = id;
            js.src = "https://connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));



    </script>



    <header class="main-header">
        <div><a href="index.html"><img src="./images/logo.png" class="logo"></a></div>
        <div>
            <ul class="main-nav">
                <li class="lady" id="women" onclick="apiurl('women')">女裝</li>
                <li class="topl">｜</li>
                <li class="man" id="men" onclick="apiurl('men')">男裝</a></li>
                <li class="topl">｜</li>
                <li class="kit" id="accessories" onclick="apiurl('accessories')">配件</a></li>
            </ul>
        </div>
        <div class="functionbar">
            <div>
                <div class="searchbox"
                    style=" border: solid 1px #979797 ;border-radius:30px; width:214px;height:40px; ">
                    <input type="text" placeholder="Search.." class="searchtyping" name="searchtyping"
                        id="searchtyping"> </input>
                    <img type="submit" src="./images/search.png" class="search" height="30" width="30" id="search"
                        onclick="readSearch()"></img>
                </div>
            </div>
            <a href="ShoppingCart.html">
                <div class="CartAndQTY">
                    <img src="./images/cart.png" class="bag" alt="shopping-cart" height="44" width="44">
                    <div id="cart-qty" class="qty">0</div>
                </div>
            </a>
            <div class="memberDiv">
                <img src="./images/member.png" alt="member" class="member" height="44" width="44"
                    onclick="checkLoginState()">
            </div>
        </div>
    </header>


    <header class="mobilemain-header">
        <div class="logoandsearch">

            <a href="index.html"><img src="./images/logo.png" class="mobilelogo" id="mobilelogo"></a>


            <!-- 未點擊之前會先隱藏的欄位 -->
            <div class="mobilesearchbox" id="mobilesearchbox"
                style=" border: solid 1px #979797 ;border-radius:30px; width:70%;height:40px; ">
                <input type="text" placeholder="Search..." style="width: 70%; height: 20px; border: transparent"
                    class="searchtyping" name="searchtyping" id="mobilesearchtyping"></input>
                <img type="submit" src="./images/search.png" class="search" height="18" width="18"
                    id="secondmobilesearch" onclick="mobilereadSearch()"></img>
                <button class="closebtn" height="40" width="40" id="closebtn"> X </button>
            </div>


            <img src="./images/search.png" class="mobilesearch" id="mobilesearch" height="44" width="44"></img>

        </div>
        <div class="mobilemain-navdiv">
            <ul class="mobilemain-nav">
                <li class="mobilelady" id="mobilewomen" onclick="apiurl('women'); changeLadyColor()">女裝</li>
                <li class="mobiletopl">｜</li>
                <li class="mobileman" id="mobilemen" onclick="apiurl('men'); changeManColor()">男裝</a></li>
                <li class="mobiletopl">｜</li>
                <li class="mobilekit" id="mobileaccessories"  onclick="apiurl('accessories'); changeKitColor()">配件</a></li>
            </ul>
        </div>
    </header>


    <div class="grey-line"></div>

    <div class="banner" id="banner">
        <a class="bannerPic" id="bannerPic" src="">
            <div class="poem" id="poem">
                <span class="poetry" id="poetry"> <br> </span>
                <span class="writer"> </span>
            </div>
        </a>
        <div class="steps">
            <span class="dot" onclick="currentSlide(0)"></span>
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
        </div>
    </div>


    <div class="empty"></div>
    <div>
        <div class="genral-container" id="genral-container">
            <!-- <div  class="pic-container">
                <img id="picture" src="./images/test.png" class="pic 1"></img>
                <div class="hextrial">
                    <div class="color 1" background-color=""></div>
                </div>
                <div>
                    <p class="productsname">後鬆緊牛仔落地寬褲</p>
                </div>
                <div>
                    <p class="price">TWD.590</p>
                </div>
            </div>
            <div class="pic-container">
                <img  id="picture" src="./images/test.png" class="pic 2"></img>
                <div class="hextrial">
                    <div class="color 2" background-color=""></div>
                    <div class="color 2_2" background-color=""></div>
                </div>
                <p class="productsname">前開衩扭結洋裝</p>
                <p class="price">TWD.690</p>
            </div>
            <div class="pic-container">
                <img id="picture" src="./images/test.png" class="pic 3"></img>
                <div class="hextrial">
                    <div class="color 3" background-color=""></div>
                    <div class="color 3_2" ></div>
                </div>
                <p class="productsname">涼感垂墜絲滑寬</p>
                <p class="price">TWD.430</p>
            </div>
            <div class="pic-container">
                <img id="picture" src="./images/test.png" class="pic 4"></img>
                <div class="hextrial">
                    <div class="color 4" background-color=""></div>
                    <div class="color 4_2" background-color=""></div>
                </div>
                <p class="productsname">腰鬆緊棉麻褲裙</p>
                <p class="price">TWD.590</p>
            </div>
            <div class="pic-container">
                <img id="picture" src="./images/test.png" class="pic 5"></img>
                <div class="hextrial">
                    <div class="color 5" background-color=""></div>
                    <div class="color 5_2" background-color=""></div>
                </div>
                <p class="productsname">前開衩扭結洋裝</p>
                <p class="price">TWD.690</p>
            </div>
            <div class="pic-container">
                <img id="picture" src="./images/test.png" class="pic 6"></img>
                <div class="hextrial">
                    <div class="color 6" background-color=""></div>
                </div>
                <p class="productsname">透肌澎澎連袖防曬上衣</p>
                <p class="price">TWD.430</p>
            </div> -->
        </div>
    </div>

    <div class="empty"></div>

    <footer class="footer">
        <div class="narrowfooter">
            <div>
                <ul class="footer-nav">
                    <li class="aboutStylish">關於 Stylish</li>
                    <li class="downl">｜</li>
                    <li class="service">服務條款</li>
                    <li class="downl">｜</li>
                    <li class="privacy">隱私政策</li>
                    <li class="downl">｜</li>
                    <li class="contact">聯絡我們</li>
                    <li class="downl">｜</li>
                    <li class="FAQ">FAQ</li>
                </ul>
            </div>
            <div class="mediadiv">
                <ul class="social-media">
                    <li><img class="line" src="./images/line.png" alt="line" height="50" width="50"></li>
                    <li><img class="twitter" src="./images/twitter.png" alt="twitter" height="50" width="50"></li>
                    <li><img class="facebook" src="./images/facebook.png" alt="facebook" height="50" width="50"></li>
                </ul>
            </div>
            <div class="copyrightdiv">
                <span class="copyright"> &copy; 2018. All rights reserved.</span>
            </div>
        </div>





    </footer>
    <div class="fixedbar">
        <a href="ShoppingCart.html">
            <div class="cartdescription">
                <img src="./images/cart-mobile.png" class="mobilebag" alt="shopping-cart" height="30" width="30">
                <div id="cart-qty" class="qty mobileQTY">0</div>
                <p class="mobilecart">購物車</p>
            </div>
        </a>
        <div>
            <p class="mobiletopl">|</p>
        </div>
        <div class="memberdescription">
            <img src="./images/member-mobile.png" alt="member" class="mobilemember" height="30" width="30"
                onclick="checkLoginState()">
            <p class="mobilemember" onclick="checkLoginState()">會員</p>
        </div>

    </div>


    <script src="./index.js"></script>
    <script src="./FBlogin.js"></script>
</body>


</html>
<script>
    /* 開啟頁面的第一時間，先確認網址後方是否有 queryString，如果有的話，是什麼。
    如果結尾為 index.html，代表這是首頁，應該要 load 出所以的產品（女裝＋男裝＋配件）。
    但如果後面有 queryString，則判斷是 tag=XXX，並且只去 render XXX 的產品資訊
    （這種狀況發生於在其他頁面時，點擊女裝、男裝、配件按鈕，跳回首頁去 render 只想看到的特定資料） */

    window.addEventListener("load", function (){CheckQueryString()});

    function CheckQueryString (){
        let urlParams = new URLSearchParams(window.location.search);
        let tagWord = urlParams.get("tag");
        console.log(tagWord);

        if (tagWord == "women"){
            apiurl("women");

        }else if (tagWord == "men"){
            apiurl("men");
        
        }else if (tagWord == "accessories"){
            apiurl("accessories");
        
        }else if (tagWord !== ""){ // 如果沒有 querystring 的話，就等於直接導到首頁
            apiurl("all");
        }
       
    }

    // window.addEventListener('load', function () { apiurl("all") });
    window.addEventListener("load", function () { marketing() });
    window.addEventListener("load", function () { addUpQTY() });


    // 搜尋 bar 裡按下 enter 鍵，會跟點擊放大鏡圖片有一樣的效果 
    var input = document.getElementById("searchtyping");
    input.addEventListener("keyup", function (event) {
        if (event.keyCode === 13) {
            event.preventDefault();
            document.getElementById("search").click();
        }
    });

    var mobileinput = document.getElementById("mobilesearchtyping");
    mobileinput.addEventListener("keyup", function (event) {
        if (event.keyCode === 13) {
            event.preventDefault();
            document.getElementById("secondmobilesearch").click();
        }
    });

</script>